<!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8">
        <meta name="generator" content="CoffeeCup HTML Editor (www.coffeecup.com)">
        <meta name="dcterms.created" content="Fri, 27 Jun 2014 21:02:23 GMT">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <title></title>
        
        <!--[if IE]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    	
    	
      </head>
      
      <body ondragover="drag_over(event)" ondrop="drop(event)" style="background-color:#23272a">
        <div id="capture">
<%- defaulthtml %>
        
        </div>
        <div id="opts">
<%- opts %>
        </div>
</body>



<script src="./js/canvas.js"></script>
<script>
    function drag_start(event) {
        var style = window.getComputedStyle(event.target, null);
        var str = (parseInt(style.getPropertyValue("left")) - event.clientX) + ',' + (parseInt(style.getPropertyValue("top")) - event.clientY) + ',' + event.target.id;
        event.dataTransfer.setData("Text", str);
    }

    function drop(event) {
        var offset = event.dataTransfer.getData("Text").split(',');
        var dm = document.getElementById(offset[2]);
        dm.style.left = (event.clientX + parseInt(offset[0], 10)) + 'px';
        dm.style.top = (event.clientY + parseInt(offset[1], 10)) + 'px';
        event.preventDefault();
        return false;
    }

    function drag_over(event) {
        event.preventDefault();
        return false;
    }
    texts = ["text1", "title1", "text2"]
    images = ["image1"]

    function buttonmoment() {
        texts.forEach(element => {
            document.getElementById(element).style.backgroundColor = "rgba(51, 170, 51, 0)"
            document.getElementById(element).style.border = "0"
        }); images.forEach(element => {
            document.getElementById(element).setAttribute("src", "{avatar}")
        })
        window.open("<%- address %>/app/<%- guild %>/editor/render/join?html=" + encodeURIComponent(document.getElementById('capture').innerHTML) + "&opts=" + encodeURIComponent(document.getElementById('opts').innerHTML), "_self")
    }
    function load_inp () {
        document.querySelectorAll(".title").forEach(item => {item.style.fontSize = document.getElementById("titlesize").value + "px"})
        document.querySelectorAll(".text").forEach(item => {item.style.fontSize = document.getElementById("textsize").value + "px"})
        document.getElementById("text1").setAttribute("value", document.getElementById("text1").value)
        document.getElementById("title1").setAttribute("value", document.getElementById("title1").value)
        document.getElementById("bg").style.backgroundColor = document.getElementById("bgcolor").value
        document.getElementById("bg").style.borderRadius = document.getElementById("borderradius").value.replace("px", "") + "px";
        document.getElementById("bg").style.backgroundImage = "url('" + document.getElementById("bgimg").value + "')"
        document.getElementById("bg").style.backgroundSize = "cover"
        texts.forEach(element => {
            document.getElementById(element).style.color = document.getElementById("textcolor").value
        });
        images.forEach(element => {
            document.getElementById(element).style.borderRadius = document.getElementById("imageradius").value.replace("px", "") + "px"
            document.getElementById(element).style.width= document.getElementById("imagesize").value.replace("px", "") + "px"
            document.getElementById(element).style.height = document.getElementById("imagesize").value.replace("px", "") + "px"
        });

        document.getElementById("bgcolor").setAttribute("value", document.getElementById("bgcolor").value)
        document.getElementById("textcolor").setAttribute("value", document.getElementById("textcolor").value)
        document.getElementById("borderradius").setAttribute("value", document.getElementById("borderradius").value)
        document.getElementById("bgimg").setAttribute("value", document.getElementById("bgimg").value)
        document.getElementById("titlesize").setAttribute("value", document.getElementById("titlesize").value)
        document.getElementById("textsize").setAttribute("value", document.getElementById("textsize").value)

        document.getElementById("imageradius").setAttribute("value", document.getElementById("imageradius").value) 
        document.getElementById("imagesize").setAttribute("value", document.getElementById("imagesize").value) 
    }
    function bold(where) {
        title = document.getElementById("titlecheck")
        text = document.getElementById("textcheck")
        if (where == 'title') {if (!title.hasAttribute("checked")) {title.setAttribute("checked", "checked")} else {title.removeAttribute("checked")}}
        if (where == 'text') {if (!text.hasAttribute("checked")) {text.setAttribute("checked", "checked")} else {text.removeAttribute("checked")}}
        document.querySelectorAll("." + where).forEach(item => {item.classList.toggle("bold");})
    }
    
</script>


</html>