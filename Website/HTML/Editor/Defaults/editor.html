<!doctype html>
<html lang="en">

<head>
    <link href='https://fonts.googleapis.com/css?family=Alatsi' rel='stylesheet'>
    <title>Unnamed Bot - Dashboard</title>
<link rel="icon" href="https://cdn.discordapp.com/avatars/732208102652379187/07cdc23792f9c6ecf7dd2c976f1e8111.webp?size=1024">
    <link href="/CSS/dashboardguild.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body id="thebody" style="background:#1C1F26">
    <div class="navbar">
        <a class="h" href="<%= address %>/">Home</a>
        <a class="h" href="<%= status %>">Status</a>
        <a class="h active" href="<%= address %>/app">Dashboard</a></li>
        <div class="dropdown">
            <button class="dropbtn">More
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
                <a class="h" href="<%= address %>/documentation">Documentation <i class="fa fa-book" aria-hidden="true"></i></a>
                <a class="h" href="<%= address %>/about">About <i class="fa fa-question-circle" aria-hidden="true"></i></a>
                <a class="h" href="<%= address %>/commands">Commands <i class="fa fa-list" aria-hidden="true"></i></a>
                <a class="h" href="<%= address %>/changelogs">Changelogs <i class="fa fa-file-text-o" aria-hidden="true"></i></a>
            </div>
        </div>
    </div>
    <div style="padding:21px"></div>
    <div class="container">
        <img style="width:100%;height:50%;pointer-events: none;" class="selectDisable" id="myImage"
            src="https://i.ibb.co/V9ZZ4r5/cubes.png">
        <div class="centered" onselectstart="return false" style="cursor: context-menu;">Unnamed bot - Dashboard</div>
    </div>
    <div class="topcornerdiv" id="topcorner">
        <button
            style="float:right;margin-top:25px;background-color: #ffffff30;color:white;box-shadow: 0px 0px 4px 2px #00000050;border:none;border-radius: 5px;"
            onclick="logout()">Log out</button>
        <button
            style="float:right;margin-top:25px;background-color: #ffffff30;color:white;box-shadow: 0px 0px 4px 2px #00000050;border:none;border-radius: 5px;"
            onclick="change()">Switch accounts</button>
        <%- avatar %>
        <p style="z-index:100;color:white" id="logintext">You're logged in as <%= name %></p>

    </div>
    <div class="text" style="" id="main">
        <div style="box-shadow: 0px 0px 20px 6px #00000050;border-radius:10px;background-color:#1C1F26;min-width:80%;float: right;margin-right:5%;top:0;max-width:25%;height:70px;">
            <!--AUTOGENERATED START-->
            <%- worksection %>
            <%- membersection %>
            <%- channelsection %>
            <%- prefixsection %>
            <%- editor %>
            <!--AUTOGENERATED END-->
        </div>
        <div style="box-shadow: 0px 0px 20px 6px #00000050;border-radius:10px;background-color:#1C1F26;min-width:80%;float: right;margin-right:5%;top:0;max-width:50%;">
            <!--AUTOGENERATED START-->
            <div ondragover="drag_over(event)" ondrop="drop(event)" style="background-color:#23272a;position:relative" >
                <div id="capture">
        <%- defaulthtml %>
                
                </div>
                <div id="opts">
        <%- opts %>
                </div>
                </div>
            <!--AUTOGENERATED END-->
        </div>
        <div class="footer-logos"
            style="box-shadow: 0px 0px 20px 6px #00000020;background-color:#282C34;width:60px;margin-left:3%;padding:10px;border-radius:10px;padding-bottom:1000px">
            <table style="text-align: center; margin: auto;">
                <tbody>
                    <td cellpadding="0" valign="top">
                        <!--AUTOGENERATED START-->
                        <%- servers %>
                        <!--AUTOGENERATED END-->
                    </td>
                </tbody>
            </table>


        </div>
        
    </div>

</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/JS/dashboardguild.js"></script>
<script>
    function drag_start(event) {
        document.getElementById("enablewelcome").setAttribute("checked", "checked")
        document.getElementById("joinchannel_main").removeAttribute("disabled")
        var style = window.getComputedStyle(event.target, null);
        var str = (parseInt(style.getPropertyValue("left")) - event.clientX) + ',' + (parseInt(style.getPropertyValue("top")) - event.clientY) + ',' + event.target.id;
        event.dataTransfer.setData("Text", str);
    }

    function drop(event) {
        document.getElementById("enablewelcome").setAttribute("checked", "checked")
        document.getElementById("joinchannel_main").removeAttribute("disabled")
        var offset = event.dataTransfer.getData("Text").split(',');
        var dm = document.getElementById(offset[2]);
        dm.style.left = (event.clientX + parseInt(offset[0], 10)) + 'px';
        dm.style.top = (event.clientY + parseInt(offset[1], 10)) + 'px';
        event.preventDefault();
        return false;
    }

    function drag_over(event) {
        document.getElementById("enablewelcome").setAttribute("checked", "checked")
        document.getElementById("joinchannel_main").removeAttribute("disabled")
        event.preventDefault();
        return false;
    }
    texts = ["text1", "title1", "text2"]
    images = ["editorimage1"]

    function buttonmoment() {
        e = document.getElementById("joinchannel_main");
        if (document.getElementById("enablewelcome").getAttribute("checked")) {if (e.options[e.selectedIndex].value == "false") {return window.alert("You haven't chosen a channel!")}}
        texts.forEach(element => {
            document.getElementById(element).style.backgroundColor = "rgba(51, 170, 51, 0)"
            document.getElementById(element).style.border = "0"
        }); images.forEach(element => {
            document.getElementById(element).setAttribute("src", "{avatar}")
        })
        options = document.getElementById('opts').innerHTML.split("<!--ignore-->")[0] + document.getElementById('opts').innerHTML.split("<!--ignore-->")[2]
        if (document.getElementById("enablewelcome").getAttribute("checked")) {
            
            window.open("<%- address %>/app/<%- guild %>/editor/render/join?html=" + encodeURIComponent(document.getElementById('capture').innerHTML) + "&opts=" + encodeURIComponent(options.replace("Enable welcome image</label>", "Enable welcome image</label><2- joinchannels 2>".split("2").join("%"))) + "&enabled=true" + "&channel=" + encodeURIComponent(e.options[e.selectedIndex].value), "_self")
        } else {window.open("<%- address %>/app/<%- guild %>/editor/render/join?html=" + encodeURIComponent(document.getElementById('capture').innerHTML) + "&opts=" + encodeURIComponent(options.replace("Enable welcome image</label>", "Enable welcome image</label><2- joinchannels 2>".split("2").join("%"))) + "&enabled=false" + "&channel=" + encodeURIComponent(e.options[e.selectedIndex].value), "_self")
        }
        
    }
    function load_inp() {
        document.getElementById("enablewelcome").setAttribute("checked", "checked")
        document.getElementById("joinchannel_main").removeAttribute("disabled")
        document.querySelectorAll(".title").forEach(item => {item.style.fontSize = document.getElementById("titlesize").value + "px"})
        document.querySelectorAll(".textbox").forEach(item => {item.style.fontSize = document.getElementById("textsize").value + "px"})
        
        document.getElementById("bg").style.backgroundColor = document.getElementById("bgcolor").value
        document.getElementById("bg").style.borderRadius = document.getElementById("borderradius").value.replace("px", "") + "px"
        if (["{guild_icon}", "guild", "guild_icon", "{guild}"].includes(document.getElementById("bgimg").value)) {
            document.getElementById("bg").style.backgroundImage = "url('<%- guildicon %>')"
        } else {document.getElementById("bg").style.backgroundImage = "url('" + document.getElementById("bgimg").value + "')"}

        document.getElementById("bg").style.backgroundSize = "cover"
        texts.forEach(element => {
            document.getElementById(element).style.color = document.getElementById("textcolor").value
            document.getElementById(element).setAttribute("value", document.getElementById(element).value)
        });
        images.forEach(element => {
            document.getElementById(element).style.borderRadius = document.getElementById("imageradius").value.replace("px", "") + "px"
            document.getElementById(element).style.width= document.getElementById("imagesize").value.replace("px", "") + "px"
            document.getElementById(element).style.height = document.getElementById("imagesize").value.replace("px", "") + "px"
        });

        document.getElementById("bgcolor").setAttribute("value", document.getElementById("bgcolor").value)
        document.getElementById("textcolor").setAttribute("value", document.getElementById("textcolor").value)
        document.getElementById("borderradius").setAttribute("value", document.getElementById("borderradius").value)
        document.getElementById("bgimg").setAttribute("value", document.getElementById("bgimg").value)
        document.getElementById("titlesize").setAttribute("value", document.getElementById("titlesize").value)
        document.getElementById("textsize").setAttribute("value", document.getElementById("textsize").value)

        document.getElementById("imageradius").setAttribute("value", document.getElementById("imageradius").value) 
        document.getElementById("imagesize").setAttribute("value", document.getElementById("imagesize").value) 
    }
    function bold(where) {
        title = document.getElementById("titlecheck")
        text = document.getElementById("textcheck")
        if (where == 'title') {if (!title.hasAttribute("checked")) {title.setAttribute("checked", "checked")} else {title.removeAttribute("checked")}}
        if (where == 'textbox') {if (!text.hasAttribute("checked")) {text.setAttribute("checked", "checked")} else {text.removeAttribute("checked")}}
        document.querySelectorAll("." + where).forEach(item => {item.classList.toggle("bold");})
    }
    
    function enablewelcome() {
        enable = document.getElementById("enablewelcome")
        if (!enable.hasAttribute("checked")) {enable.setAttribute("checked", "checked");document.getElementById("joinchannel_main").removeAttribute("disabled")} else {enable.removeAttribute("checked");document.getElementById("joinchannel_main").setAttribute("disabled", "disabled")}
    }
</script>
</html>